box:
  id: quay.io/tatsuya6502/rustbook
  tag: latest
  registry: quay.io

dev:
  steps:
    - script:
        name: build the book
        code: |
          make RUSTBOOK=/root/.cargo/bin/rustbook

build:
  steps:
    - install-packages:
        packages: xz-utils
    - script:
        name: build the book
        code: |
          make RUSTBOOK=/root/.cargo/bin/rustbook
    - script:
        name: make tarball
        code: |
          tar cJf trpl-ja.txz public
    - script:
        name: save artifacts
        code: |
          cp trpl-ja.txz $WERCKER_REPORT_ARTIFACTS_DIR
